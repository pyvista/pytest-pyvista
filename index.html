
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>pytest-pyvista &#8212; pytest-pyvista 0.3.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=71d9d8e6"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'index';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.3.2" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
    
    
      
    
    
    <img src="https://docs.pyvista.org/_static/pyvista_logo_sm.png" class="logo__image only-light" alt="pytest-pyvista 0.3.2 documentation - Home"/>
    <img src="https://docs.pyvista.org/_static/pyvista_logo_sm.png" class="logo__image only-dark pst-js-only" alt="pytest-pyvista 0.3.2 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pytest-pyvista" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="http://slack.pyvista.org" title="Slack Community" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack Community</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pyvista/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pyvista/blob/main/CONTRIBUTING.rst" title="Contributing" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-gavel fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Contributing</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pytest-pyvista" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="http://slack.pyvista.org" title="Slack Community" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-slack fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Slack Community</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pyvista/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyvista/pyvista/blob/main/CONTRIBUTING.rst" title="Contributing" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-gavel fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Contributing</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="pytest-pyvista">
<h1>pytest-pyvista<a class="headerlink" href="#pytest-pyvista" title="Link to this heading">#</a></h1>
<a class="reference external image-reference" href="https://pypi.org/project/pytest-pyvista"><img alt="PyPI version" src="https://img.shields.io/pypi/v/pytest-pyvista.svg?color=orange&amp;label=pypi&amp;logo=python&amp;logoColor=white" />
</a>
<a class="reference external image-reference" href="https://anaconda.org/conda-forge/pytest-pyvista"><img alt="conda-forge version" src="https://img.shields.io/conda/vn/conda-forge/pytest-pyvista?color=orange&amp;label=conda-forge&amp;logo=conda-forge&amp;logoColor=white" />
</a>
<a class="reference external image-reference" href="https://pypi.org/project/pytest-pyvista"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/pytest-pyvista.svg?color=orange&amp;logo=python&amp;label=python&amp;logoColor=white" />
</a>
<a class="reference external image-reference" href="https://github.com/pyvista/pytest-pyvista/actions/workflows/ci_cd.yml"><img alt="GitHub Actions: Unit Testing and Deployment" src="https://github.com/pyvista/pytest-pyvista/actions/workflows/ci_cd.yml/badge.svg" />
</a>
<p>Plugin to test PyVista plot outputs.</p>
<hr class="docutils" />
<p>This <a class="reference external" href="https://github.com/pytest-dev/pytest">pytest</a> plugin was generated with <a class="reference external" href="https://github.com/audreyr/cookiecutter">Cookiecutter</a> along with
<a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a>’s <a class="reference external" href="https://github.com/pytest-dev/cookiecutter-pytest-plugin">cookiecutter-pytest-plugin</a> template.</p>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h2>
<p>This plugin facilitates the comparison of the images produced by <cite>PyVista</cite>. It
generates a cache of images from the tests, using the <cite>PyVista</cite> plotting
function in its first execution. Then, further executions will compare its
results against this cache, so if there are any changes in the code that break
the image generation, the comparison against the cache will notice it. Note
that there is an error tolerance in the comparison, so minor differences won’t
fail.</p>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">#</a></h2>
<p>You must have a Python version &gt;= 3.10, as well as PyVista installed
in your environment.</p>
<p><code class="docutils literal notranslate"><span class="pre">pyvista&gt;=0.37.0</span></code> and <code class="docutils literal notranslate"><span class="pre">vtk&gt;=9.2.2</span></code> are required.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>You can install <code class="docutils literal notranslate"><span class="pre">pytest-pyvista</span></code> via <a class="reference external" href="https://pypi.org/project/pip/">pip</a> from <a class="reference external" href="https://pypi.org/project">PyPI</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pytest-pyvista
</pre></div>
</div>
<p>Alternatively, you can also install via <a class="reference external" href="https://github.com/conda/conda">conda</a> or <a class="reference external" href="https://github.com/mamba-org/mamba">mamba</a> from <a class="reference external" href="https://anaconda.org/conda-forge/pytest-pyvista">conda-forge</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mamba<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>pytest-pyvista
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h2>
<p>The plugin has two main use cases:</p>
<ol class="arabic simple">
<li><p>Evaluate images generated by calling <code class="docutils literal notranslate"><span class="pre">pl.show()</span></code> in unit tests.</p></li>
<li><p>Evaluate images generated by the
<a class="reference external" href="https://docs.pyvista.org/extras/plot_directive.html">Sphinx PyVista Plot Directive</a>
when building documentation.</p></li>
</ol>
<section id="specifying-multiple-cache-images">
<h3>Specifying multiple cache images<a class="headerlink" href="#specifying-multiple-cache-images" title="Link to this heading">#</a></h3>
<p>The cache directory is typically flat with no sub-directories. However,
it is possible to specify multiple cache images for a single test by
including a sub-directory with the same name as the test, and including
multiple “valid” cache images in the sub-directory. For example, a
single cached image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cache/my_image.jpg
</pre></div>
</div>
<p>Can be replaced with multiple versions of the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cache/my_image/0.jpg
cache/my_image/1.jpg
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The sub-directory name should match the name of the test.</p></li>
<li><p>The image names in sub-directories can be arbitrary, e.g. <code class="docutils literal notranslate"><span class="pre">0.jpg</span></code> or
<code class="docutils literal notranslate"><span class="pre">foo.jpg</span></code>.</p></li>
<li><p>Nested sub-directories are also supported, and their names can also be arbitrary.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">--generate_subdirs</span></code> flag to automatically generate test images in a
sub-directory format.</p></li>
</ul>
</div>
<p>When there are multiple images, the test will initially compare the test image
to the first cached image. If that comparison fails, the test image is then
compared to all other cached images for that test. The test is successful if one
of the comparisons is successful, though a warning is still issued if it initially
failed.</p>
<p>Both use cases (i.e. unit tests and documentation tests) support specifying multiple
cache images.</p>
</section>
</section>
<section id="unit-tests">
<h2>Unit tests<a class="headerlink" href="#unit-tests" title="Link to this heading">#</a></h2>
<p>Once installed, you only need to use the command <code class="docutils literal notranslate"><span class="pre">pl.show()</span></code> in your test. The
plugin will automatically manage the cache generation if it does not exist, and
the image comparison itself. Make sure you enable <code class="docutils literal notranslate"><span class="pre">pv.OFF_SCREEN</span></code> when loading
PyVista, so the <code class="docutils literal notranslate"><span class="pre">pl.show()</span></code> doesn’t pop up any window while testing.  By default,
the <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> fixture should be used for each test for image comparison:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyvista</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pv</span>

<span class="n">pv</span><span class="o">.</span><span class="n">OFF_SCREEN</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">def</span><span class="w"> </span><span class="nf">test_succeeds</span><span class="p">(</span><span class="n">verify_image_cache</span><span class="p">):</span>
    <span class="n">pl</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">pyvista</span><span class="o">.</span><span class="n">Sphere</span><span class="p">(),</span> <span class="n">show_edges</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>If most tests utilize this functionality, possibly restricted to a module,
a wrapped version could be used</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wrapped_verify_image_cache</span><span class="p">(</span><span class="n">verify_image_cache</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">verify_image_cache</span>
</pre></div>
</div>
<p>If you need to use any flag inside the tests, you can modify the
<code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> object in the test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyvista</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pv</span>

<span class="n">pv</span><span class="o">.</span><span class="n">OFF_SCREEN</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">def</span><span class="w"> </span><span class="nf">test_succeeds</span><span class="p">(</span><span class="n">verify_image_cache</span><span class="p">):</span>
    <span class="n">verify_image_cache</span><span class="o">.</span><span class="n">windows_skip_image_cache</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">pl</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">pyvista</span><span class="o">.</span><span class="n">Sphere</span><span class="p">(),</span> <span class="n">show_edges</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="documentation-image-tests">
<h2>Documentation image tests<a class="headerlink" href="#documentation-image-tests" title="Link to this heading">#</a></h2>
<p>Unlike the unit tests, which use the <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> fixture to evaluate test
images during each test’s teardown, the documentation tests do not use a fixture.
Instead, the documentation tests are invoked with the <code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code> flag, and requires
specifying:</p>
<ol class="arabic simple">
<li><p>A target directory which contains all images to be tested. The directory is specified
using the <code class="docutils literal notranslate"><span class="pre">--doc_images_dir</span></code> flag.</p></li>
<li><p>A cache directory containing all reference images to compare with. The directory is
specified using the <code class="docutils literal notranslate"><span class="pre">--image_cache_dir</span></code> flag.</p></li>
</ol>
<p>Since all images must be available for testing, the documentation tests are typically
executed <cite>after</cite> building documentation with Sphinx or some other build process. To test
build images against images in a cache directory use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>--doc_mode<span class="w"> </span>--doc_images_dir<span class="w"> </span>images<span class="w"> </span>--image_cache_dir<span class="w"> </span>cache
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">images</span></code> is the target directory of images to test, and <code class="docutils literal notranslate"><span class="pre">cache</span></code> is the cache
directory.</p>
<p>When executed, the test will first pre-process the build images. The images are:</p>
<ol class="arabic">
<li><p>Collected from the <code class="docutils literal notranslate"><span class="pre">images</span></code> directory (including images in nested directories).</p></li>
<li><p>Resized to a maximum of 400x400 pixels.</p></li>
<li><p>Renamed so that each file’s parent directories are included in the name.</p></li>
<li><p>Saved as images inside a temporary directory. The directory is flat with no
sub-directories.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These temporary images may be saved using the <code class="docutils literal notranslate"><span class="pre">--generated_image_dir</span></code> flag.</p>
</div>
</li>
</ol>
<p>Next, the pre-processed images are compared to the cached images.
The tests have three main modes of failure:</p>
<ol class="arabic simple">
<li><p>An image is in the cache but is missing from the build.</p></li>
<li><p>An image is in the build but is missing from the cache.</p></li>
<li><p>The error threshold when comparing two images is exceeded.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--failed_image_dir</span></code> flag to save copies of the images for
failed tests.</p>
</div>
</section>
<section id="global-flags">
<h2>Global flags<a class="headerlink" href="#global-flags" title="Link to this heading">#</a></h2>
<p>These are the flags you can use when calling <code class="docutils literal notranslate"><span class="pre">pytest</span></code> in the command line.</p>
<section id="common-flags">
<h3>Common flags<a class="headerlink" href="#common-flags" title="Link to this heading">#</a></h3>
<p>These flags may be used with regular unit testing or documentation testing with
<code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code> enabled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--image_cache_dir</span> <span class="pre">&lt;DIR&gt;</span></code> sets the image cache directory, relative to <cite>pytest root path &lt;https://docs.pytest.org/en/latest/reference/reference.html#pytest.Config.rootpath&gt;</cite>.
This will override any configuration, see below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--generated_image_dir</span> <span class="pre">&lt;DIR&gt;</span></code> dumps all generated test images into the provided
directory, relative to <cite>pytest root path &lt;https://docs.pytest.org/en/latest/reference/reference.html#pytest.Config.rootpath&gt;</cite>.
This will override any configuration, see below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--failed_image_dir</span> <span class="pre">&lt;DIR&gt;</span></code> dumps copies of cached and generated test images when
there is a warning or error raised. This directory is useful for reviewing test
failures. It is relative to <cite>pytest root path &lt;https://docs.pytest.org/en/latest/reference/reference.html#pytest.Config.rootpath&gt;</cite>.
This will override any configuration, see below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--generate_subdirs</span></code> saves generated test images in separate sub-directories
instead of saving them directly to the <code class="docutils literal notranslate"><span class="pre">generated_image_dir</span></code>. Without this option,
generated images are saved as <code class="docutils literal notranslate"><span class="pre">generated_image_dir/&lt;test_name&gt;.png</span></code>; with this
option enabled, they are instead saved as
<code class="docutils literal notranslate"><span class="pre">&lt;generated_image_dir&gt;/&lt;test_name&gt;/&lt;image_name&gt;.png</span></code>, where the image name has the format
<code class="docutils literal notranslate"><span class="pre">&lt;os-version&gt;_&lt;machine&gt;_&lt;gpu-vendor&gt;_&lt;python-version&gt;_&lt;pyvista-version&gt;_&lt;vtk-version&gt;_&lt;using-ci&gt;</span></code>.
This can be useful for providing context about how an image was generated. See the
<code class="docutils literal notranslate"><span class="pre">Customizing</span> <span class="pre">test</span> <span class="pre">cases</span></code> section for customizing the info.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--image_format</span></code> to save test images in either <code class="docutils literal notranslate"><span class="pre">png</span></code> or <code class="docutils literal notranslate"><span class="pre">jpg</span></code> format.
<code class="docutils literal notranslate"><span class="pre">png</span></code> files are saved by default. Use <code class="docutils literal notranslate"><span class="pre">jpg</span></code> to reduce the image file size.
This will override any configuration, see below.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--max_image_size</span></code> to specify a single integer that limits the maximum width or
height (whichever is larger) of generated images to this value or smaller. By default,
images have dimensions <code class="docutils literal notranslate"><span class="pre">(1024,</span> <span class="pre">768)</span></code> as determined by the <code class="docutils literal notranslate"><span class="pre">Plotter.window_size</span></code> or
<code class="docutils literal notranslate"><span class="pre">pyvista.global_theme.window_size</span></code>. If enabled, images are resized while preserving
the aspect ratio. Images are only resized to be smaller, and are not enlarged.</p></li>
</ul>
</section>
<section id="unit-testing-flags">
<h3>Unit testing flags<a class="headerlink" href="#unit-testing-flags" title="Link to this heading">#</a></h3>
<p>These flags are specific to the unit tests. They cannot be used with
<code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code> enabled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--reset_image_cache</span></code> creates a new image for each test in
<code class="docutils literal notranslate"><span class="pre">tests/plotting/test_plotting.py</span></code> and is not recommended except for
testing or for potentially a major or minor release.</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">--ignore_image_cache</span></code> if you want to
temporarily ignore regression testing, e.g. on a particular CI action.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--add_missing_images</span></code> adds any missing images from the test run to the cache.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--reset_only_failed</span></code> reset the image cache of the failed tests only.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--allow_unused_generated</span></code> to prevent an error from being raised when a
test image is generated but not used. A test image is considered “used” if it has a
corresponding cached image to compare against, or is used to reset or update the
cache (e.g. if using <code class="docutils literal notranslate"><span class="pre">--add_missing_images</span></code>). Otherwise, an error is raised by
default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disallow_unused_cache</span></code> report test failure if there are any images in the cache
which are not compared to any generated images.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--allow_useless_fixture</span></code> to prevent test failure when the <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code>
fixture is used but no images are generated. If no images are generated (i.e. there are
no calls made to <code class="docutils literal notranslate"><span class="pre">Plotter.show()</span></code> or <code class="docutils literal notranslate"><span class="pre">mesh.plot()</span></code>), then these tests will fail
by default. Set this CLI flag to allow this globally, or use the test-specific flag
by the same name below to configure this on a per-test basis.</p></li>
</ul>
</section>
<section id="documentation-testing-flags">
<h3>Documentation testing flags<a class="headerlink" href="#documentation-testing-flags" title="Link to this heading">#</a></h3>
<p>These flags are specific to documentation tests. They cannot be used with regular unit
tests.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code> is a required flag for testing documentation images. It configures
pytest to only collect tests relevant for the image testing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--doc_images_dir</span> <span class="pre">&lt;DIR&gt;</span></code> sets the target directory of images to be tested.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With Sphinx, build images are typically saved to <code class="docutils literal notranslate"><span class="pre">doc/_build/html/_images</span></code>.</p>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--include_vtksz</span></code> to include tests for interactive plots which are generated by
PyVista’s plot-directive as <code class="docutils literal notranslate"><span class="pre">vtksz</span></code> files. When enabled, each <code class="docutils literal notranslate"><span class="pre">vtksz</span></code> file
inside the <code class="docutils literal notranslate"><span class="pre">doc_images_dir</span></code> is first converted to HTML, loaded in a web browser,
and rendered with the same window size as its corresponding static image.
A screenshot is captured, then compared with the cached image like normal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option requires installing additional packages, as well as installing the
chromium browser with <code class="docutils literal notranslate"><span class="pre">playwright</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pytest-pyvista<span class="o">[</span>vtksz<span class="o">]</span>
playwright<span class="w"> </span>install<span class="w"> </span>chromium
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enabling this option may increase overall test time considerably due to the additional
file processing required.</p>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--max_vtksz_file_size</span></code> to include tests to limit the size of <code class="docutils literal notranslate"><span class="pre">vtksz</span></code> files.
All <code class="docutils literal notranslate"><span class="pre">vtksz</span></code> files inside the <code class="docutils literal notranslate"><span class="pre">doc_images_dir</span></code> are collected and compared to the
specified value. The value should be specified in megabytes (MB). <code class="docutils literal notranslate"><span class="pre">20</span></code> is a good
initial value to set. The value can be customized on a per-test (i.e. per-file) basis,
see <code class="docutils literal notranslate"><span class="pre">Customizing</span> <span class="pre">test</span> <span class="pre">cases</span></code> for details. Setting this value overrides any configuration,
see below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option is completely independent from the <code class="docutils literal notranslate"><span class="pre">--include_vtksz</span></code> option. File
sizes may be tested without any additional installation.</p>
</div>
</li>
</ul>
</section>
</section>
<section id="customizing-test-cases">
<h2>Customizing test cases<a class="headerlink" href="#customizing-test-cases" title="Link to this heading">#</a></h2>
<p>Both the regular unit tests and documentation tests allow for some level of customization.</p>
<section id="customizing-unit-tests">
<h3>Customizing unit tests<a class="headerlink" href="#customizing-unit-tests" title="Link to this heading">#</a></h3>
<p>These are attributes of <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code>. You can set them as <code class="docutils literal notranslate"><span class="pre">True</span></code> if needed
in the beginning of your test function.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">high_variance_test</span></code>: If necessary, the threshold for determining if a test
will pass or not is incremented to another predetermined threshold. This is
currently done due to the use of an unstable version of VTK, in stable
versions this shouldn’t be necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">windows_skip_image_cache</span></code>: For test where the plotting in Windows is different
from MacOS/Linux.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">macos_skip_image_cache</span></code>: For test where the plotting in MacOS is different
from Windows/Linux.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code>: If you have a test that plots a figure, but you don’t want to compare
its output against the cache, you can skip it with this flag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow_useless_fixture</span></code>: Set this flag to <code class="docutils literal notranslate"><span class="pre">True</span></code> to prevent test failure when the
<code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> fixture is used but no images are generated. The value of this
flag takes precedence over the global flag by the same name (see above).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_info</span></code>: Dataclass for controlling the environment info used to name the generated
test image(s) when the <code class="docutils literal notranslate"><span class="pre">--generate_dirs</span></code> option is used. The info can be test-specific
or can be modified globally by wrapping the <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> fixture, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wrapped_verify_image_cache</span><span class="p">(</span><span class="n">verify_image_cache</span><span class="p">):</span>
    <span class="c1"># Customize the environment info (NOTE: Default values are shown)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">verify_image_cache</span><span class="o">.</span><span class="n">env_info</span>
    <span class="n">info</span><span class="o">.</span><span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Add a custom prefix</span>
    <span class="n">info</span><span class="o">.</span><span class="n">os</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the os version (e.g. ubuntu, macOS, Windows)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">machine</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the machine info (e.g. arm64)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">gpu</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the gpu vendor (e.g. NVIDIA)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">python</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the python version</span>
    <span class="n">info</span><span class="o">.</span><span class="n">pyvista</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the pyvista version</span>
    <span class="n">info</span><span class="o">.</span><span class="n">vtk</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide the vtk version</span>
    <span class="n">info</span><span class="o">.</span><span class="n">ci</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Show/hide if generated in CI</span>
    <span class="n">info</span><span class="o">.</span><span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Add a custom suffix</span>

    <span class="c1"># Alternatively, set a custom string</span>
    <span class="n">verify_image_cache</span><span class="o">.</span><span class="n">env_info</span> <span class="o">=</span> <span class="s1">&#39;my_custom_string&#39;</span>

    <span class="k">return</span> <span class="n">verify_image_cache</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="customizing-documentation-tests">
<h3>Customizing documentation tests<a class="headerlink" href="#customizing-documentation-tests" title="Link to this heading">#</a></h3>
<p>Similar to how the unit tests may be customized using the <code class="docutils literal notranslate"><span class="pre">verify_image_cache</span></code> fixture,
the documentation tests can be customized using a <code class="docutils literal notranslate"><span class="pre">doc_verify_image_cache</span></code> object.
Instead of a fixture, a pytest hook function is used.</p>
<p>In your <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file, define a hook function named <code class="docutils literal notranslate"><span class="pre">pytest_pyvista_doc_mode_hook</span></code>
with <code class="docutils literal notranslate"><span class="pre">doc_verify_image_cache</span></code> and <code class="docutils literal notranslate"><span class="pre">request</span></code> as arguments. The <code class="docutils literal notranslate"><span class="pre">doc_verify_image_cache</span></code>
object can then be modified directly on a per-test (i.e. per-image) basis.</p>
<p>For example, a test comparing the build image <code class="docutils literal notranslate"><span class="pre">images/foo.png</span></code> to the cached image
<code class="docutils literal notranslate"><span class="pre">cache/foo.png</span></code> will have the test name <code class="docutils literal notranslate"><span class="pre">foo</span></code>, and can be modified as shown below.
Currently, only the <code class="docutils literal notranslate"><span class="pre">env_info</span></code> can be customized. Refer to the test-specific flags
for unit tests above for more details about customizing the <code class="docutils literal notranslate"><span class="pre">env_info</span></code> string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">pytest_pyvista_doc_mode_hook</span><span class="p">(</span><span class="n">doc_verify_image_cache</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">doc_verify_image_cache</span><span class="o">.</span><span class="n">test_name</span> <span class="o">==</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span>
        <span class="n">doc_verify_image_cache</span><span class="o">.</span><span class="n">env_info</span> <span class="o">=</span> <span class="s1">&#39;my_custom_string&#39;</span>
    <span class="k">return</span> <span class="n">doc_verify_image_cache</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Customizing the <code class="docutils literal notranslate"><span class="pre">env_info</span></code> will affect the generated image’s filename, and is only
relevant if the <code class="docutils literal notranslate"><span class="pre">--generate_subdirs</span></code> option is enabled.</p>
</div>
<p>Since the regular <code class="docutils literal notranslate"><span class="pre">pytest</span></code> <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture is also exposed by the hook, users
can further modify the test properties based based on node, markers, or other fixtures.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">--max_vtksz_file_size</span></code> option is used, these tests may similarly be customized
with a <code class="docutils literal notranslate"><span class="pre">pytest_pyvista_max_vtksz_file_size_hook</span></code>. For example, to set the max
allowed file size to <code class="docutils literal notranslate"><span class="pre">50</span></code> for the <code class="docutils literal notranslate"><span class="pre">foo.vtksz</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">pytest_pyvista_max_vtksz_file_size_hook</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">test_case</span><span class="o">.</span><span class="n">test_name</span> <span class="o">==</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span>
        <span class="n">test_case</span><span class="o">.</span><span class="n">max_vtksz_file_size</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="k">return</span> <span class="n">test_case</span>
</pre></div>
</div>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h2>
<p>If using <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> or any other
<a class="reference external" href="https://docs.pytest.org/en/latest/reference/customize.html">pytest configuration</a>
section, consider configuring your test directory location to
avoid passing command line arguments when calling <code class="docutils literal notranslate"><span class="pre">pytest</span></code>, for example in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">image_cache_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/plotting/image_cache&quot;</span>
</pre></div>
</div>
<p>Additionally, to configure the directory that will contain the generated test images:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">generated_image_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;generated_images&quot;</span>
</pre></div>
</div>
<p>Similarly, configure the directory that will contain any failed test images:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">failed_image_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;failed_images&quot;</span>
</pre></div>
</div>
<p>Configure directories for when <code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code> is used:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">doc_failed_image_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;failed_test_images&quot;</span>
<span class="n">doc_generated_image_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;generated_test_images&quot;</span>
<span class="n">doc_image_cache_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/doc/doc_image_cache&quot;</span>
<span class="n">doc_images_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;doc/_build/html/_images&quot;</span>
</pre></div>
</div>
<p>Note that these directories are relative to <cite>pytest root path &lt;https://docs.pytest.org/en/latest/reference/reference.html#pytest.Config.rootpath&gt;</cite>.</p>
<p>Include additional vtksz file tests.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">include_vtksz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">max_vtksz_file_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span>
</pre></div>
</div>
<p>Configure the image format to be <code class="docutils literal notranslate"><span class="pre">jpg</span></code> for both unit tests and when using <code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code>.
Limit the image dimensions to 400 pixels as well.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">image_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jpg&quot;</span>
<span class="n">max_image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400</span>
</pre></div>
</div>
<p>Or, set them to use different image formats and sizes:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">image_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;png&quot;</span>
<span class="n">max_image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400</span>
<span class="n">doc_image_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;jpg&quot;</span>
<span class="n">doc_max_image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">600</span>
</pre></div>
</div>
<p>Enable the generation of test images inside of sub-directories for both unit tests and when using <code class="docutils literal notranslate"><span class="pre">--doc_mode</span></code>.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">generate_subdirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>Or, set them to different values:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">generate_subdirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">doc_generate_subdirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">#</a></h2>
<p>Contributions are always welcome. Tests can be run with <a class="reference external" href="https://tox.readthedocs.io/en/latest/">tox</a>, please ensure
the coverage at least stays the same before you submit a pull request.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">#</a></h2>
<p>Distributed under the terms of the <a class="reference external" href="http://opensource.org/licenses/MIT">MIT</a> license, <code class="docutils literal notranslate"><span class="pre">pytest-pyvista</span></code> is free
and open source software.</p>
</section>
<section id="issues">
<h2>Issues<a class="headerlink" href="#issues" title="Link to this heading">#</a></h2>
<p>If you encounter any problems, please <a class="reference external" href="https://github.com/pyvista/pytest-pyvista/issues">file an issue</a> along with a detailed
description.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/pytest_pyvista.VerifyImageCache.html">pytest_pyvista.VerifyImageCache</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#specifying-multiple-cache-images">Specifying multiple cache images</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-tests">Unit tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation-image-tests">Documentation image tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#global-flags">Global flags</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#common-flags">Common flags</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing-flags">Unit testing flags</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation-testing-flags">Documentation testing flags</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#customizing-test-cases">Customizing test cases</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#customizing-unit-tests">Customizing unit tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#customizing-documentation-tests">Customizing documentation tests</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration">Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contributing">Contributing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#issues">Issues</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/pyvista/pytest-pyvista/edit/main/doc/index.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, PyVista.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>